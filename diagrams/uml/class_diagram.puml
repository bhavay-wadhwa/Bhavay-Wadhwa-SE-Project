@startuml
' Class diagram for your repo structure

package "src" {

  class "app.py" as App <<module>> {
    +start_server()
    +handle_upload(file)
    +stream_frame()
  }

  class "detection.py" as Detection <<module>> {
    +load_model(weights_path)
    +detect(frame) : list[detection]
    +preprocess(frame)
  }

  class "tracking.py" as Tracking <<module>> {
    +init_tracker()
    +update(detections) : tracks
    +get_tracks()
  }

  class "distance_estimation.py" as DistanceEst <<module>> {
    +estimate_distance(bbox, camera_params) : float
    +set_camera_params(params)
  }

  class "alerts.py" as Alerts <<module>> {
    +check_thresholds(distances)
    +trigger_alert(type, data)
    +log_event(event)
  }

  class "visualizer.py" as Visualizer <<module>> {
    +draw_boxes(frame, detections, tracks)
    +annotate_distance(frame, distances)
    +save_video(path)
  }
}

package "support" {

  class "models/" as Models <<folder>> {
    +yolov9_weights
    +configs
  }

  class "datasets/" as Datasets <<folder>> {
    +BDD100K_subset
  }

  class "results/" as Results <<folder>> {
    +logs
    +reports
  }

  class "templates/" as Templates <<folder>>
  class "static/" as Static <<folder>>
}

' Relationships
App --> Detection : uses
App --> Tracking : uses
App --> DistanceEst : uses
App --> Alerts : uses
App --> Visualizer : uses

Detection --> Models : loads
Detection --> Datasets : training data

Tracking --> Models : tracker model/config

Alerts --> Results : logs to
Visualizer --> Results : saves outputs

@enduml


